{% extends 'AppAdopcion/inicio.html' %}
{% load static %}

{% block title %} Crear Animal {% endblock title %}

{% block contenidoQueCambia %}
<div class="d-flex justify-content-center align-items-center py-5">
  <div class="card register-card shadow-sm" style="max-width:520px; width:100%;">
    <div class="card-body p-4" style="background-color: #dae2cb;">
      <div class="text-center mb-3">
        <div class="register-hero mx-auto mb-2">游</div>
        <h2 class="h5 fw-bold mb-1">Crear Animal</h2>
        <p class="text-muted small mb-3">Complet치 los datos y sub칤 una foto</p>
      </div>

      {% if form.errors %}
        <div class="alert alert-danger" role="alert">
          <strong>Corrige los errores:</strong>
          <ul class="mb-0">
            {% for field in form %}
              {% for error in field.errors %}
                <li>{{ field.label }}: {{ error }}</li>
              {% endfor %}
            {% endfor %}
            {% for error in form.non_field_errors %}
              <li>{{ error }}</li>
            {% endfor %}
          </ul>
        </div>
      {% endif %}

      <form action="" method="POST" enctype="multipart/form-data" class="w-100" style="max-width:460px; margin:0 auto;">
        {% csrf_token %}

        <div class="mb-3">
          <label for="{{ form.nombre.id_for_label }}" class="form-label fw-semibold">Nombre</label>
          <input
            type="text"
            name="{{ form.nombre.name }}"
            id="{{ form.nombre.id_for_label }}"
            value="{{ form.nombre.value|default_if_none:'' }}"
            class="form-control"
            placeholder="Nombre"
            aria-label="Nombre"
          />
          {% if form.nombre.errors %}
            <div class="invalid-feedback d-block">{{ form.nombre.errors|striptags }}</div>
          {% endif %}
        </div>

        <div class="mb-3">
          <label for="{{ form.especie.id_for_label }}" class="form-label fw-semibold">Especie</label>
          <input
            type="text"
            name="{{ form.especie.name }}"
            id="{{ form.especie.id_for_label }}"
            value="{{ form.especie.value|default_if_none:'' }}"
            class="form-control"
            placeholder="Especie"
            aria-label="Especie"
          />
          {% if form.especie.errors %}
            <div class="invalid-feedback d-block">{{ form.especie.errors|striptags }}</div>
          {% endif %}
        </div>

        <div class="mb-3">
          <label for="{{ form.edad.id_for_label }}" class="form-label fw-semibold">Edad</label>
          <input
            type="text"
            name="{{ form.edad.name }}"
            id="{{ form.edad.id_for_label }}"
            value="{{ form.edad.value|default_if_none:'' }}"
            class="form-control"
            placeholder="Edad"
            aria-label="Edad"
          />
          {% if form.edad.errors %}
            <div class="invalid-feedback d-block">{{ form.edad.errors|striptags }}</div>
          {% endif %}
        </div>

        <div class="mb-3">
          <label for="{{ form.descripcion.id_for_label }}" class="form-label fw-semibold">Descripci칩n</label>
          <textarea
            name="{{ form.descripcion.name }}"
            id="{{ form.descripcion.id_for_label }}"
            class="form-control"
            placeholder="Descripci칩n"
            rows="3"
            aria-label="Descripci칩n"
          >{{ form.descripcion.value|default_if_none:'' }}</textarea>
          {% if form.descripcion.errors %}
            <div class="invalid-feedback d-block">{{ form.descripcion.errors|striptags }}</div>
          {% endif %}
        </div>

        <div class="mb-3">
          <label for="{{ form.estado.id_for_label }}" class="form-label fw-semibold">Estado</label>
          <select
            name="{{ form.estado.name }}"
            id="{{ form.estado.id_for_label }}"
            class="form-select"
            aria-label="Estado"
          >
            {% for val, label in form.estado.field.choices %}
              <option value="{{ val }}" {% if form.estado.value == val %}selected{% endif %}>{{ label }}</option>
            {% endfor %}
          </select>
          {% if form.estado.errors %}
            <div class="invalid-feedback d-block">{{ form.estado.errors|striptags }}</div>
          {% endif %}
        </div>

        <div class="mb-3">
          <label for="{{ form.foto.id_for_label }}" class="form-label fw-semibold">Foto</label>
          <input
            type="file"
            name="{{ form.foto.name }}"
            id="{{ form.foto.id_for_label }}"
            class="form-control"
            aria-label="Foto"
          />
          {% if form.foto.errors %}
            <div class="invalid-feedback d-block">{{ form.foto.errors|striptags }}</div>
          {% endif %}
        </div>

        <div class="d-grid mt-2">
          <button type="submit" class="btn btn-adopcion btn-lg">Guardar</button>
        </div>

        <div class="text-center small text-muted mt-3">
          <a href="{% url 'animales_list' %}" class="text-decoration-none">Volver a la lista</a>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock contenidoQueCambia %}
