{% extends "AppAdopcion/inicio.html" %}
{% load static %}
{% block contenidoQueCambia %}
<section class="py-5">
  <div class="container">
    <div class="card mx-auto" style="max-width: 600px; background-color: #dae2cb;">
      {% if animal.foto %}
        <img src="{{ animal.foto.url }}" class="card-img-top" alt="{{ animal.nombre }}">
      {% else %}
        <img src="{% static 'img/no-image.png' %}" class="card-img-top" alt="Sin foto">
      {% endif %}
      <div class="card-body">
        <h3 class="card-title">{{ animal.nombre }}</h3>
        <p class="card-text"><strong>Especie:</strong> {{ animal.especie }}</p>
        <p class="card-text"><strong>Edad:</strong> {{ animal.edad }}</p>
        <p class="card-text"><strong>Descripción:</strong> {{ animal.descripcion }}</p>
        <p class="fw-bold"><strong>Estado:</strong> {{ animal.get_estado_display }}</p>

        <div class="mt-3 d-flex gap-2">
          {# Botón Adoptar: si está autenticado va directo al formulario con animal_pk #}
          {% if request.user.is_authenticated %}
            <a href="{% url 'solicitud_create_with_animal' animal.pk %}" class="btn btn-adopcion">Adoptar</a>
          {% else %}
            {# Redirigir al login y luego al formulario de solicitud para este animal #}
            <a href="{% url 'users:login' %}?next={% url 'solicitud_create_with_animal' animal.pk %}" class="btn btn-adopcion">Adoptar</a>
          {% endif %}

          {# Editar/Eliminar solo para superuser (ya lo tenías) #}
          {% if request.user.is_superuser %}
            <a href="{% url 'animal_update' animal.pk %}" class="btn btn-warning">Editar</a>
            <a href="{% url 'animal_delete' animal.pk %}" class="btn btn-danger">Eliminar</a>
          {% endif %}

          <a href="{% url 'animales_list' %}" class="btn btn-secondary">Volver</a>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}
